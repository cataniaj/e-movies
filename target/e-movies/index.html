<!DOCTYPE html>
<html>

<body>
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<div ng-app="myApp" ng-controller="myCtrl" style="text-align:center"> 
	<form ng-submit="submit()">
		   <h2>Nouveau compte</h2>
		  firstname <input type="text" ng-model="user.firstname"/><br>
		  lastname <input type="text" ng-model="user.lastname"/><br>
		  mail <input type="text" ng-model="user.mail"/><br>
		  password <input type="text" ng-model="user.password"/><br>
		  coins <input type="text" ng-model="user.coins"/><br>
		  address <input type="text" ng-model="user.address"/><br>
		  zipcode <input type="text" ng-model="user.zipcode"/><br>
		  city <input type="text" ng-model="user.city"/><br>
		  phone <input type="text" ng-model="user.phone"/><br>
		  country <input type="text" ng-model="user.country"/><br>
		  <input type="submit" id="signin" value="Submit" /><br>
	</form>
	<div style="text-align:center">
		<h1>Connexion</h1>
		<form ng-submit="login()">
			  mail<input type="text" ng-model="logger.mail"/><br>
			  Mot de passe:<input type="text" ng-model="logger.password"/><br>
			  <input type="submit" id="login" value="Submit" /><br>
		</form>
	</div>
	 <h2>Rechercher un film </h2>
     titre <input type="text" name="movie" ng-model="title"><br>
    <input type="submit" name="" ng-click="searchMovie()">
    

    <h2>Rechercher une serie</h2>
     titre <input type="text" name="tv" ng-model="titleTv"><br>
    <input type="submit" name="" ng-click="searchTv()">

</div>
<script>
				var app = angular.module('myApp', []);
				app.controller('myCtrl', function($scope, $http) {
			  $scope.user;
			  $scope.logger;
			  $scope.title;
			  $scope.searchMovie = function(){
			  	console.log($scope.title);
				  	var config = {
					  	method: 'get',
					  	url: 'http://localhost:8080/e-movies/rest/videos/search/all/movie/'+$scope.title,
					  	headers: {'Content-Type': 'application/json; charset=utf-8'},
					  	crossDomain: true,
			    		dataType: 'jsonp'
				  	};
				  	$http(config)
				  		.then(function(success){
				  			$scope.movie = {};
				  			$scope.movie = success.data;
				  			console.log($scope.movie);
				  		}, function(error){
				  			console.log("error")
				  		 	console.log(error);
				  		});
			  };
			  $scope.titleTv;
			  $scope.searchTv = function(){
			  	console.log($scope.title);
				  	var config = {
					  	method: 'get',
					  	url: 'http://localhost:8080/e-movies/rest/videos/search/all/tv/'+$scope.titleTv,
					  	headers: {'Content-Type': 'application/json; charset=utf-8'},
					  	crossDomain: true,
			    		dataType: 'jsonp'
				  	};
				  	$http(config)
				  		.then(function(success){
				  			$scope.movie = {};
				  			$scope.movie = success.data;
				  			console.log($scope.movie);
				  		}, function(error){
				  			console.log("error")
				  		 	console.log(error);
				  		});
			  };

			  
			  $scope.submit = function(){
				  	console.log($scope.user);
				  	var config = {
					  	method: 'post',
					  	url: 'http://localhost:8080/e-movies/rest/users/createNewAccount',
					  	data: JSON.stringify($scope.user),
					  	headers: {'Content-Type' : 'application/json', 'Access-Control-Allow-Origin': 'http://localhost:8080','Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE','Access-Control-Allow-Headers': 'Accept, X-Requested-With','Access-Control-Allow-Credentials': 'true'}
				  	};
				  	$http(config)
				  		.then(function(success){
				  			console.log(success)
				  		}, function(error){
				  		 	console.log(error);
				  		});
			  }

			  $scope.login = function(){
			  	console.log($scope.logger);
			  		var config = {
					  	method: 'post',
					  	url: 'http://localhost:8080/e-movies/rest/users/login',
					  	data: JSON.stringify($scope.logger),
					  headers: {'Content-Type' : 'application/json'},
					  	//crossDomain: true,
			    		dataType: 'jsonp'
				  	};
				  	$http(config)
				  		.then(function(success){
				  			console.log(success.data)
				  		}, function(error){
				  		 	console.log(error);
				  		});
			  };
			});

</script>

</body>
</html>
